{% extends 'basic.html' %}
{% block content %}
<style>
    #type {
        background: pink;
        color: #fa5a5a;
        padding: 2px 5px;
        border-radius: 20px;
        font-size: 12px;
        display: inline-block;
    }

    svg {
        width: 20px;
        margin-right: 5px;
    }

    p {
        margin: 0;

    }

    .second {
        display: inline-block;
        margin-left: 29px;
    }

    .space {
        margin: 15px 0;
    }

    .card2, .card3, .card4 {
        border: 1px solid #f0f0fb;
        border-radius: 10px;
        padding: 20px 40px;

    }

    .card4 {
        border: 1px solid #ffffc9;
        background: #ffffb2;
    }

    .card2 {
        border: 1px solid #f0f0fb;
        background: #f0f0fb;
    }

    .card3 {
        border: 1px solid #d8f6d8;
        background: #c1f8c1;
    }

    .image-wrap {
        margin: 0 30px 0 0;
    }


    .image-wrap img {
        width: 100%;
        height: 500px;
        object-fit: cover;
    }

    .card {
        padding-bottom: 20px;
    }

    .image-wrap .card {
        width: 70%;
        margin-top: -100px; /* overlap by about 20% of image */
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .btn-lg {
        width: 250px;
    }

    .error {
        width: 100%;
        height: 50px;
        border: 2px solid #e10404;
        background: #faadad;
        border-radius: 10px;
        padding: 10px;
    }

    .error span {
        color: white;
    }

</style>
<title>Detail {{ event.title }}</title>
<div class="detail">
    <div class="image-wrap">
        <img src="{{ event.photo.url }}" alt="">
        <div class="card container">
            <div class="card-body">
                <p id="type"> {{ event.type }}</p>
                <h1 class="card-title">{{ event.title }}</h1>
                <div class="row">
                    <div class="col-lg-6 col-md-6 col-ms-6">
                        <div class="space">
                            <p class="card-text">
                                <svg fill="#4db2ff" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                    <path d="M464 256a208 208 0 1 1 -416 0 208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0 256 256 0 1 0 -512 0zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"/>
                                </svg>
                                Date Time <br>
                            <div class="text-secondary second">{{ event.date_time }}</div>
                        </div>
                        <div class="space">

                            <p class="card-text">
                                <svg fill="#4db2ff" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
                                    <path d="M0 188.6C0 84.4 86 0 192 0S384 84.4 384 188.6c0 119.3-120.2 262.3-170.4 316.8-11.8 12.8-31.5 12.8-43.3 0-50.2-54.5-170.4-197.5-170.4-316.8zM192 256a64 64 0 1 0 0-128 64 64 0 1 0 0 128z"/>
                                </svg>
                                {{ event.location }} <br>
                        </div>

                    </div>
                    <div class="col-lg-6 col-md-6 col-ms-6">
                        <div class="space">
                            <p class="card-text">
                                <svg fill="#00a876" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
                                    <path d="M320 16a104 104 0 1 1 0 208 104 104 0 1 1 0-208zM96 88a72 72 0 1 1 0 144 72 72 0 1 1 0-144zM0 416c0-70.7 57.3-128 128-128 12.8 0 25.2 1.9 36.9 5.4-32.9 36.8-52.9 85.4-52.9 138.6l0 16c0 11.4 2.4 22.2 6.7 32L32 480c-17.7 0-32-14.3-32-32l0-32zm521.3 64c4.3-9.8 6.7-20.6 6.7-32l0-16c0-53.2-20-101.8-52.9-138.6 11.7-3.5 24.1-5.4 36.9-5.4 70.7 0 128 57.3 128 128l0 32c0 17.7-14.3 32-32 32l-86.7 0zM472 160a72 72 0 1 1 144 0 72 72 0 1 1 -144 0zM160 432c0-88.4 71.6-160 160-160s160 71.6 160 160l0 16c0 17.7-14.3 32-32 32l-256 0c-17.7 0-32-14.3-32-32l0-16z"/>
                                </svg>
                                Availability<br>
                            <div class="text-secondary second">{{ event.free_seats }}of{{ event.capacity }} spots
                                available
                            </div>
                            <div>
                                <input class="second" disabled id="range" type="range" max="{{ event.capacity }}"
                                       min="0"
                                       value="{{ event.free_seats }}">
                            </div>
                        </div>
                        <div class="space">

                            <p class="card-text">
                                <svg fill="#00a876" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">
                                    <path d="M136 24c0-13.3 10.7-24 24-24s24 10.7 24 24l0 40 56 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-114.9 0c-24.9 0-45.1 20.2-45.1 45.1 0 22.5 16.5 41.5 38.7 44.7l91.6 13.1c53.8 7.7 93.7 53.7 93.7 108 0 60.3-48.9 109.1-109.1 109.1l-10.9 0 0 40c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-40-72 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l130.9 0c24.9 0 45.1-20.2 45.1-45.1 0-22.5-16.5-41.5-38.7-44.7l-91.6-13.1C55.9 273.5 16 227.4 16 173.1 16 112.9 64.9 64 125.1 64l10.9 0 0-40z"/>
                                </svg>
                                Price<br>
                                {% if event.price == 0 %}
                                    <div class="text-success second"><b>Free</b></div>
                                {% else %}
                                    <div class="text-success second"><b>${{ event.price }}</b></div>
                                {% endif %}
                        </div>
                    </div>
                </div>
                <hr>
                <div>
                    <h1>About This Event</h1>
                    <p>{{ event.description }}</p>
                </div>
            </div>


            {#                            {% for reservation in reservations %}#}
            {#            {% if request.user == reservation.user %}#}
            {#                                    <div class="card3 text-center">#}
            {#                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">#}
            {#                                            <path fill="#09c88f"#}
            {#                                                  d="M434.8 70.1c14.3 10.4 17.5 30.4 7.1 44.7l-256 352c-5.5 7.6-14 12.3-23.4 13.1s-18.5-2.7-25.1-9.3l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l101.5 101.5 234-321.7c10.4-14.3 30.4-17.5 44.7-7.1z"/>#}
            {#                                        </svg>#}
            {#                                        <h5><strong>You're Registered!</strong></h5>#}
            {#                                        <p class="text-secondary">You have already reserved tickets for this event.</p>#}
            {#                                    </div>#}
{#            {% else %}#}
{##}
{#            {% endif %}#}
{#            {% endfor %}#}


            {% if messages %}
                {% for message in messages %}
                    {% if reservations %}
                        <div class="card3 text-center">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                                <path fill="#09c88f"
                                      d="M434.8 70.1c14.3 10.4 17.5 30.4 7.1 44.7l-256 352c-5.5 7.6-14 12.3-23.4 13.1s-18.5-2.7-25.1-9.3l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l101.5 101.5 234-321.7c10.4-14.3 30.4-17.5 44.7-7.1z"/>
                            </svg>
                            <h5><strong>You're Registered!</strong></h5>
                            <p class="text-secondary">You have already reserved tickets for this event.</p>
                        </div>
                    {% elif event.free_seats == 0 %}
                        <div class="card4 text-center">
                            <h5><strong>No more seat available</strong></h5>
                        </div>
                    {% else %}
                        {% if message.tags == 'error' %}
                            <div class="error">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                    <path fill="#fff"
                                          d="M256 512a256 256 0 1 1 0-512 256 256 0 1 1 0 512zm0-192a32 32 0 1 0 0 64 32 32 0 1 0 0-64zm0-192c-18.2 0-32.7 15.5-31.4 33.7l7.4 104c.9 12.6 11.4 22.3 23.9 22.3 12.6 0 23-9.7 23.9-22.3l7.4-104c1.3-18.2-13.1-33.7-31.4-33.7z"/>
                                </svg>
                                <span>{{ message }}</span>
                            </div>
                        {% else %}
                            <div class="card2">
                                <div style="margin-bottom: 20px">
                                    <h4>
                                        <svg fill="#006ec2" xmlns="http://www.w3.org/2000/svg"
                                             viewBox="0 0 576 512">
                                            <path d="M64 64C28.7 64 0 92.7 0 128l0 64C0 200.8 7.4 207.7 15.7 210.6 34.5 217.1 48 235 48 256s-13.5 38.9-32.3 45.4C7.4 304.3 0 311.2 0 320l0 64c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-64c0-8.8-7.4-15.7-15.7-18.6-18.8-6.5-32.3-24.4-32.3-45.4s13.5-38.9 32.3-45.4c8.3-2.9 15.7-9.8 15.7-18.6l0-64c0-35.3-28.7-64-64-64L64 64zM416 336l0-160-256 0 0 160 256 0zM112 160c0-17.7 14.3-32 32-32l288 0c17.7 0 32 14.3 32 32l0 192c0 17.7-14.3 32-32 32l-288 0c-17.7 0-32-14.3-32-32l0-192z"/>
                                        </svg>
                                        <b>Reserve Your Spot</b>
                                    </h4>
                                </div>

                                <form method="post">
                                    <div class="row">
                                        {% csrf_token %}
                                        <div class="col-lg-6 col-md-6 col-ms-6">
                                            <label for="id_seat_reservation">Number of Tickets</label><br>
                                            <input class="form-control" type="number" name="seat_reservation"
                                                   id="id_seat_reservation" required>
                                        </div>
                                        {#                            <div class="col-lg-4  col-md-4 col-ms-4 text-center">#}
                                        {#                                <span>Total price</span>#}
                                        {#                                {% if event.price == 0 %}#}
                                        {#                                    <h2 style="color: #3a3af6"><b>Free</b></h2>#}
                                        {#                                {% else %}#}
                                        {#                                    <h2 style="color: #00a876">$ </h2>#}
                                        {#                                {% endif %}#}
                                        {#                            </div>#}
                                        <div class="col-lg-6 col-md-6 col-ms-6 text-end">
                                            <button class="btn btn-primary btn-lg">Submit</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            {% endif %}
        </div>
    </div>
</div>
<script>
</script>

{% endblock %}